<div class="row">

    <!-- FILTERS -->
    <div class="col-lg-3 col-md-3 col-sm-5">
        <div class="btn-group btn-group-justified">
            <div class="btn-group btn-group-vertical">
                <div class="btn-group btn-group-sm"><span class="btn btn-block label">Class</span></div>
                <div class="btn-group btn-group-sm"><span class="btn btn-block label">Spec</span></div>
            </div>

            <div class="btn-group btn-group-vertical" ng-repeat="fotmFilter in fotmFilters">

                <!-- FILTER CLASS -->
                <div class="dropdown btn-group btn-group-sm">

                    <!-- Dropdown button -->
                    <button type="button"
                            class="dropdown-toggle btn btn-default"
                            data-toggle="dropdown">

                        <img ng-if="fotmFilters[$index].classFilter"
                             ng-src="{{media.classImage(fotmFilters[$index].classFilter)}}"
                             alt="{{fotmFilters[$index].classFilter}}" />

                        <span ng-if="!fotmFilters[$index].classFilter">
                            All
                        </span>

                    </button>

                    <!-- Dropdown menu -->
                    <ul class="dropdown-menu" role="menu">

                        <li ng-repeat="(className, classId) in media.classes">

                            <a ng-click="fotmFilters[$parent.$index].classFilter = className; fotmFilters[$parent.$index].specFilter = null">
                                <img ng-src="{{media.classImage(className)}}" alt="{{className}}" />
                            </a>

                        </li>

                        <li class="notext">
                            <a ng-click="fotmFilters[$index].classFilter = null; fotmFilters[$index].specFilter = null">
                                All
                            </a>
                        </li>
                    </ul>

                </div>

                <!-- FILTER SPEC -->
                <div class="dropdown btn-group btn-group-sm">

                    <!-- Dropdown button -->
                    <button type="button"
                            class="dropdown-toggle btn btn-default"
                            data-toggle="dropdown">

                        <img ng-if="fotmFilters[$index].specFilter"
                             ng-src="{{fotmFilters[$index].specFilter.url}}"
                             alt="{{fotmFilters[$index].specFilter.text}}" />

                        <span ng-if="!fotmFilters[$index].specFilter">
                            All
                        </span>

                    </button>

                    <!-- Dropdown menu -->
                    <ul class="dropdown-menu" role="menu">

                        <li ng-if="fotmFilters[$parent.$index].classFilter"
                            ng-repeat="(specId, spec) in getSpecsFor($index)">

                            <a ng-click="fotmFilters[$parent.$parent.$index].specFilter = spec">
                                <img ng-src="{{spec.url}}" alt="{{spec.text}}" />
                            </a>

                        </li>

                        <li class="notext">
                            <a ng-click="fotmFilters[$index].specFilter = null">All</a>
                        </li>

                    </ul>

                </div>

            </div> <!-- /fotmFilters -->
        </div>
    </div>

    <!-- MAIN LEADERBOARD -->
    <div class="col-lg-9 col-md-9 col-sm-12">
        <table class="table table-striped table-condensed table-responsive">
            <tbody>
                <tr ng-repeat="team in teams">
                    <td class="centered">{{$index+1}}</td>

                    <td class="hidden-xs">
                        <img ng-src="{{media.factionImage(team)}}" alt="{{media.factionText(team)}}" />
                    </td>

                    <td>
                        <div class="row">
                            <div class="col-lg-4 col-md-4 col-sm-4" ng-repeat="player in team.lastEntry.players">

                                <a ng-href="{{media.armoryLink(region, player)}}" class="nolink">

                                    <img ng-src="{{media.raceImage(player.race, player.gender)}}"
                                         alt="{{media.raceText(player.race)}}" />

                                    <img class="hidden-xs"
                                         ng-src="{{media.classImageForSpec(player.classSpec)}}"
                                         alt="{{media.classText(player.classSpec)}}" />

                                    <img ng-src="{{media.specImage(player.classSpec)}}"
                                         alt="{{media.specText(player.classSpec)}}" />

                                    <span>{{player.name}}</span>

                                </a>
                            </div>
                        </div>
                    </td>

                    <td class="centered">{{team.lastEntry.rating}}</td>

                </tr>
            </tbody>
        </table>
    </div>
</div>